dataset:
  _target_: galaxea_fm.data.libero_lerobot_dataset.LiberoLerobotDataset

  dataset_dirs: 
    - /TO/Your/Path/libero_10_no_noops
    - /TO/Your/Path/libero_goal_no_noops
    - /TO/Your/Path/libero_object_no_noops
    - /TO/Your/Path/libero_spatial_no_noops

  shape_meta:
    action:
      - key: default
        raw_shape: 7
        shape: 7
    
    state:
      - key: default
        raw_shape: 8
        shape: 8
    
    images:
      - key: image
        raw_shape: 
          - 3
          - 256
          - 256
        shape:
          - 3
          - ${model.model_meta.input_image_size.0}
          - ${model.model_meta.input_image_size.1}
      - key: wrist_image
        raw_shape: 
          - 3
          - 256
          - 256
        shape:
          - 3
          - ${model.model_meta.input_image_size.0}
          - ${model.model_meta.input_image_size.1}

  action_size: 32
  past_action_size: 0
  obs_size: 1
  val_set_proportion: 0.05


processor:
  _target_: galaxea_fm.processors.base_processor.BaseProcessor

  shape_meta: ${data.dataset.shape_meta}
  num_obs_steps: ${data.dataset.obs_size}
  num_output_cameras: 2
  action_output_dim: ${sum_shapes:${data.dataset.shape_meta.action}}
  proprio_output_dim: ${sum_shapes:${data.dataset.shape_meta.state}}

  action_state_transforms: null

  # action & state normalization
  use_stepwise_action_norm: False
  norm_default_mode: ${model.model_meta.norm_default_mode}
  norm_exception_mode: null

  action_state_merger: 
    _target_: galaxea_fm.transforms.action_state_merger.ConcatLeftAlign

  train_transforms:
    image:
      - _target_: torchvision.transforms.Resize
        size: ${model.model_meta.input_image_size}
      - _target_: galaxea_fm.transforms.image.ToTensor
      - _target_: torchvision.transforms.Normalize
        mean: [0.5, 0.5, 0.5]
        std: [0.5, 0.5, 0.5]
    wrist_image: ${data.processor.train_transforms.image}
  val_transforms:
    image:
      - _target_: torchvision.transforms.Resize
        size: ${model.model_meta.input_image_size}
      - _target_: galaxea_fm.transforms.image.ToTensor
      - _target_: torchvision.transforms.Normalize
        mean: [0.5, 0.5, 0.5]
        std: [0.5, 0.5, 0.5]
    wrist_image: ${data.processor.val_transforms.image}

  # instruction
  drop_high_level_prob: 1.0
  use_zh_instruction: False

  tokenizer: ${model.tokenizer}
